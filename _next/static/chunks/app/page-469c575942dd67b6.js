(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3781:function(e,l,t){Promise.resolve().then(t.bind(t,3500))},3500:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return u}});var n=t(7437),s=t(9760),a=t.n(s),r=t(2265),o=t(3400),d=t(3253),i=t(9089),c=t(2980);function x(){let[e,l]=(0,r.useState)(""),[t,s]=(0,r.useState)("all"),[x,u]=(0,r.useState)(!1),[p,m]=(0,r.useState)("all"),[h,f]=(0,r.useState)(""),[g,w]=(0,r.useState)("personal"),[j,y]=(0,r.useState)([]),[N,b]=(0,r.useState)(!1),[v,k]=(0,r.useState)(!1),C=(0,r.useRef)(null),I=(0,r.useRef)(null),[S,P]=(0,r.useState)(!0),[J,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y(JSON.parse(localStorage.getItem("today"))||[]),P(!1),O(!0)},[]),(0,r.useEffect)(()=>{J&&console.log("کامپوننت رندر شد")},[J]);let D=(0,r.useCallback)(()=>{if(h){let e;let l={task:h,category:g,date:new Date,isCompleted:!1,isPinned:!1},t=j.filter(e=>e.isCompleted),n=j.filter(e=>e.isPinned),s=j.filter(e=>!e.isPinned&&!e.isCompleted);y(e=n.length>0?[...n,l,...s,...t]:[l,...s,...t]),localStorage.setItem("today",JSON.stringify(e)),f("")}},[h,g,j]),E=e=>{let l=[...j],t=l[e];if(t.isCompleted=!t.isCompleted,t.isCompleted){let[t]=l.splice(e,1);l.push(t)}else{l.splice(e,1);let n=l.findIndex(e=>e.isCompleted);-1===n?l.push(t):l.splice(n,0,t)}y(l),localStorage.setItem("today",JSON.stringify(l))},_=e=>{let l=[...j],t=l[e];if(t.isPinned=!t.isPinned,t.isPinned){let[t]=l.splice(e,1);l.unshift(t)}else{let t=l.filter(e=>e.isPinned),n=l.splice(e,1)[0];l.splice(t.length,0,n)}y(l),localStorage.setItem("today",JSON.stringify(l))},L=e=>{let l=[...j];l.splice(e,1),y(l),localStorage.setItem("today",JSON.stringify(l))},R=(()=>{let e=new Date,{jd:l}=a().toJalaali(e),t=e.toLocaleDateString("fa-IR",{weekday:"long"});return{day:l,month:e.toLocaleDateString("fa-IR",{month:"long"}),weekday:t}})(),G=()=>{u(!x),!x&&I.current&&I.current.focus()},F=e=>{m(e),("completed"===e||"incomplete"===e)&&b(!0)},H=j.filter(e=>"all"===t||("work"===t?"work"===e.category:"personal"===t&&"personal"===e.category)).filter(e=>"completed"===p?e.isCompleted:"incomplete"!==p||!e.isCompleted).filter(l=>l.task.toLowerCase().includes(e.toLowerCase()));return(0,n.jsxs)("div",{className:"h-screen max-w-[98%] lg:max-w-[87%] lg:mx-auto flex flex-col overflow-hidden p-2 lg:p-[22px] text-white text-md ",children:[(0,n.jsxs)("header",{className:"flex flex-col gap-2 items-end lg:flex-row lg:items-center lg:justify-between px-4",children:[(0,n.jsxs)("div",{className:"w-full flex lg:hidden backdrop rounded-full items-center gap-2 p-3 cursor-pointer",children:[(0,n.jsx)(d.Goc,{className:"w-6 h-6 group",onClick:G}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("input",{ref:I,type:"text",placeholder:"جستجوی فعالیت...",value:e,onChange:e=>l(e.target.value),className:"rounded-full bg-transparent transition-all duration-500 ease-in-out \n                  border border-transparent focus:outline-none pr-3\n                  ",style:{outline:"none"}})})]}),(0,n.jsxs)("div",{className:"w-full lg:w-max flex lg:flex-row items-center backdrop lg:mx-0 gap-2 rounded-full overflow-hidden",children:[(0,n.jsxs)("div",{className:"w-full lg:w-max text-center rounded-full overflow-hidden",children:[(0,n.jsx)("button",{className:"w-1/3 lg:w-24 p-2 ".concat("all"===t?"bg-secondary":""),onClick:()=>s("all"),children:"همه"}),(0,n.jsx)("button",{className:"w-1/3 lg:w-24 p-2 border-l border-r border-secondary ".concat("personal"===t?"bg-secondary":""),onClick:()=>s("personal"),children:"شخصی"}),(0,n.jsx)("button",{className:"w-1/3 lg:w-24 p-2 ".concat("work"===t?"bg-secondary":""),onClick:()=>s("work"),children:"کاری"})]}),(0,n.jsxs)("div",{className:"hidden lg:flex items-center gap-2 p-2 cursor-pointer",children:[(0,n.jsx)(d.Goc,{className:"w-6 h-6 group",onClick:G}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("input",{ref:I,type:"text",placeholder:"جستجوی فعالیت...",value:e,onChange:e=>l(e.target.value),className:"rounded-full bg-transparent transition-all duration-500 ease-in-out \n                  ".concat(x?"max-w-[200px] px-3":"max-w-0 px-0 py-0"," \n                  border border-transparent focus:outline-none\n                  "),style:{maxWidth:x?"200px":"0",transition:"max-width 0.5s ease-in-out, padding 0.5s ease-in-out",outline:"none"}})})]})]}),(0,n.jsxs)("div",{className:"w-full lg:w-max text-sm lg:text-md flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"hidden w-max lg:flex items-center backdrop rounded-full gap-2 px-4 py-3",children:[(0,n.jsx)("h3",{children:R.weekday}),(0,n.jsx)("h1",{children:R.day}),(0,n.jsx)("h3",{children:R.month})]}),(0,n.jsxs)("div",{className:"relative lg:w-max flex items-center justify-around mx-auto gap-1 backdrop rounded-full px-2 py-1",children:[(0,n.jsxs)("div",{className:" flex items-center justify-center lg:w-10 lg:h-10 cursor-pointer p-2 rounded-full ".concat("completed"===p?"bg-white/50":""),onClick:()=>{F("completed"===p?"all":"completed")},title:"نمایش فعالیت های تکمیل‌شده",children:[(0,n.jsx)(i.FJM,{className:"hidden lg:block"}),(0,n.jsx)("p",{className:"lg:hidden",children:"فعالیت های تکمیل‌شده"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center lg:w-10 lg:h-10 cursor-pointer p-2 rounded-full ".concat("incomplete"===p?"bg-white/50":""),onClick:()=>{F("incomplete"===p?"all":"incomplete")},title:"نمایش فعالیت های نیمه‌کاره",children:[(0,n.jsx)(i.gJy,{className:"hidden lg:block"}),(0,n.jsx)("p",{className:"lg:hidden",children:"فعالیت های تکمیل نشده"})]})]})]})]}),(0,n.jsxs)("div",{className:"h-full flex flex-col gap-4 justify-between",children:[(0,n.jsx)("div",{className:"max-h-[400px] lg:max-h-[550px] overflow-auto p-4",children:(0,n.jsx)(c.Container,{onDrop:e=>{if(null===e.removedIndex&&null===e.addedIndex)return;let l=[...j];if(e.removedIndex>=0&&e.removedIndex<l.length){let t=l[e.removedIndex];if(t.isCompleted||t.isPinned||e.addedIndex<l.length&&l[e.addedIndex].isCompleted)return;let n=e.addedIndex>0&&l[e.addedIndex-1].isPinned,s=e.addedIndex<l.length&&l[e.addedIndex].isPinned;if(!t.isPinned&&n&&s)return;l.some(e=>e.isPinned)||0!==e.addedIndex?e.addedIndex>0&&(l.splice(e.removedIndex,1),l.splice(e.addedIndex,0,t)):(l.splice(e.removedIndex,1),l.splice(0,0,t)),y(l),localStorage.setItem("today",JSON.stringify(l))}else console.error("Invalid removedIndex:",e.removedIndex)},children:H.length>0?H.map((e,l)=>(0,n.jsx)(c.Draggable,{children:(0,n.jsx)("div",{className:"flex flex-col backdrop text-lg rounded-lg my-2 p-2 cursor-pointer hover:bg-black/70 transition-all duration-300",children:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:e.isCompleted,onChange:()=>E(l),className:"h-5 w-5 rounded-full accent-secondary transition-all duration-200 cursor-pointer"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("small",{className:"text-secondary",children:"personal"===e.category?"شخصی":"کاری"}),(0,n.jsx)("span",{className:"".concat(e.isCompleted?"line-through text-gray-500":""),children:e.task})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-secondary",children:[!e.isCompleted&&(0,n.jsx)(o.bI9,{className:"h-6 w-6 cursor-pointer ".concat(e.isPinned?"text-primary":"text-secondary"),onClick:()=>_(l)}),(0,n.jsx)(o.oHP,{className:"h-6 w-6 cursor-pointer",onClick:()=>L(l)})]})]})})},l)):(0,n.jsx)("div",{className:"text-xl text-center text-white p-2 backdrop rounded-full",children:S?"درحال بارگزاری ...":"هیچ فعالیتی وجود ندارد"})})}),(0,n.jsxs)("div",{className:"w-full backdrop flex items-center justify-between border-2 border-secondary rounded-full p-4",children:[(0,n.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,n.jsx)(o.wEQ,{className:"w-7 h-7 text-secondary cursor-pointer",onClick:()=>k(!v)}),(0,n.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D()},placeholder:"فعالیت خود را اضافه کنید",maxLength:100,className:"w-full bg-transparent focus:outline-none focus:border-none"})]}),(0,n.jsx)(o.y1n,{className:"w-7 h-7 cursor-pointer ".concat(h?"text-primary":"text-secondary"),onClick:D})]}),v&&(0,n.jsxs)("div",{ref:C,className:"absolute bottom-20 right-5 lg:bottom-24 lg:right-[106px] mx-auto w-[200px] p-4 backdrop text-white rounded-lg shadow-lg",children:[(0,n.jsx)("h3",{className:"font-bold mb-4 border-b-2 pb-2 text-center",children:"انتخاب لیست"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("button",{className:"rounded-lg py-2 text-center transition-all duration-150\n              ".concat("personal"===g?"bg-primary":"","\n              "),onClick:()=>{w("personal"),k(!1)},children:"شخصی"}),(0,n.jsx)("button",{className:"rounded-lg py-2 text-center transition-all duration-150\n              ".concat("work"===g?"bg-primary":"","\n              "),onClick:()=>{w("work"),k(!1)},children:"کاری"})]})]})]})]})}function u(){return(0,n.jsx)("div",{className:"",children:(0,n.jsx)(x,{})})}}},function(e){e.O(0,[699,259,614,340,971,117,744],function(){return e(e.s=3781)}),_N_E=e.O()}]);